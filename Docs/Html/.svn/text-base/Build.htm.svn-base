<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
<meta name="GENERATOR" content="PageBreeze Free HTML Editor (http://www.pagebreeze.com)">
<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"><title>Solipsis Build Instructions</title>

<link rel="stylesheet" href="styles.css" type="text/css"></head>
<body style="background-color: rgb(255, 255, 255);"><p align="center">





<img src="../HTML/images/header.jpg" border="0" height="216" hspace="0" width="776"></p><br><h1 style="text-align: center;">Solipsis Build Instruction</h1><br><h2>HOW
TO BUILD</h2>
To
define environment variables <br><ul><li>
Under XP : press [WINDOWS]+[PAUSE] / Advanced / Env. Var.</li><li>
under Vista : press [WINDOWS]+[PAUSE] ; clic on Modify Parameters link
; / Advanced / Env. Var.</li></ul>


<h3>Visual
Studio</h3>


<ul><li>
vcX
stands for Visual config (vc7 or vc8 or vc9), be aware vc7 projects are
no more up-to-date so it s at your own risk
</li><li>

Install Visual Studio 2005 + SP1 package or VS 2008, 2003 (.Net) is no more supported.</li></ul>


<h3>Visual
Studio Express (free version)</h3>


<p>If you are using Visual Studio Express 2005,
upgrade it with the SP1 package</p><p>
Update the default Visual Studio COREWIN properties XML file to add
system libraries:<br></p><ul><li>
&nbsp;<span style="font-weight: bold;">VSExpress2005</span> C:\Program Files\Microsoft Visual Studio
8\VC\VCProjectDefaults\corewin_express.vsprops</li></ul><ul><li>
&nbsp;<span style="font-weight: bold;">VSExpress2008</span> C:\Program Files\Microsoft Visual Studio
9.0\VC\VCProjectDefaults\CoreWin.vsprops</li></ul><p>
&nbsp;replace this line :<br>
<br>
&nbsp; 
<span style="font-weight: bold;">AdditionalDependencies</span>="kernel32.lib"/&gt;
&nbsp;by this line :<br>
<br>
&nbsp; <span style="font-weight: bold;">AdditionalDependencies</span>="kernel32.lib
user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib
ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib"/&gt;</p><h3>DirectX</h3><p> Check you installed correctly the DirectX SDK
August 2007 (at least ;-) )</p>

<ul><li>
C:\Program Files\Microsoft DirectX SDK
(August 2007) is present
</li><li>
 the env. var. DXSDK_DIR
is defined (eg. "C:\Program Files\Microsoft DirectX SDK
(November 2007)\ " )</li></ul>
<h3>Ogre</h3>
<p>You can use either Ogre direct sources or
Orge SDK</p>
 


<h4 style="margin-left: 40px;">Sources</h4><ul><li>
Download
Ogre source package (branch 1.6) <a href="http://www.ogre3d.org/download/source">http://www.ogre3d.org/download/source</a>&nbsp;&nbsp;

Tested
fine with v1.6.0, and 1.6.1 --&nbsp;<a href="http://downloads.sourceforge.net/ogre/OgreSDKSetup1.6.1_VC90.exe?use_mirror=">OGRE
1.6.1 SDK for Visual C++ .Net 2008 (9.0)</a>
</li><li>
unzip it where you want (ex : c:\your_OgrePath
must contain the directory c:\your_OgrePath\OgreMain
)
</li><li>
Download
Ogre Dependencies for VSX.X&nbsp;that can be found in&nbsp; the
same page 
and
unzip them into Ogre (ex : c:\your_OgrePath\Dependencies
and c:\your_OgrePath\Samples )
</li><li>
Take care of which version of visual
C++ you have. Here are the current links (please modify this readme if
changes occured)
<br><ul><li>
<a href="http://downloads.sourceforge.net/ogre/OgreDependencies_VC8SP1_Eihort_20071227.zip">Visual
C++.Net 2005 (8.0) SP1 Precompiled Dependencies</a>&nbsp;
with Visual Studio Express 2005 or VS2005Pro</li><li><a href="http://downloads.sourceforge.net/ogre/OgreDependencies_VC9_Eihort_20080203.zip">Visual
C++.Net 2008 (9.0) Precompiled Dependencies </a>with Visual
Studio Express 2008</li></ul></li></ul>
<ul><li><h4>Build
the Ogre Package</h4></li></ul><ul style="margin-left: 80px;"><li>
Open
c:\your_OgrePath/Ogre_vc8.sln for Visual 2005
(Orge_vc9.sln for 2008...)
</li><li>
Check that the directX sdk
install have well setted the visual studio properties :<br>
<ul><li>
In VisualStudio, open Tools
Menu/Options
</li><li>
In
The Properties Tree Open the "Project and Solutions/VC++ Directories"
</li><li>
Open
The Show Directories for : combo box and
select Includes Files 
</li><li>
Check
that the includes pathes begin with "C:\Program
Files\Microsoft DirectX SDK (August 2007)\Include"&nbsp;&nbsp; (same
as "$(DXSDK_DIR)\include" )
</li><li>
Open
The Show Directories for : combo box and
select Library Files 
</li><li>
 Check
that the library pathes begin with "C:\Program
Files\Microsoft DirectX SDK (August 2007)\Lib\x86" (same
as "$(DXSDK_DIR)\lib\x86"  ) 

</li></ul></li><li>
 Batch
build all (Debug+Release)<br>
It can take a long time, ogre dependencies are quite not well set</li></ul><ul><li>Define
the OGRE_HOME env. var.<br>If you are compiling Ogre from source code<br>
&nbsp;OGRE_HOME =
C:\your_OgrePath</li></ul><h4 style="margin-left: 40px;">or SDK</h4><ul style="margin-left: 40px;"><li>Download the SDK <a href="http://www.ogre3d.org/download/sdk">http://www.ogre3d.org/download/sdk</a></li></ul><div style="margin-left: 40px;">WARNING:
If you are using 1 prebuilt release of Ogre SDK, take care this release
was built with same<br>
release of Visual Studio you will use, examples:</div><ul style="margin-left: 40px;"><li>with
Visual Studio Express 2008 or Visual 2008 Pro : : 
</li><li>with
Visual Studio Express 2005 or VS2005 Pro : <a href="http://downloads.sourceforge.net/ogre/OgreSDKSetup1.6.1_VC80.exe?use_mirror=">OGRE
1.6.1 SDK for Visual C++ .Net 2005 (8.0) SP1</a> 
&nbsp; </li></ul><div style="margin-left: 40px;">The sdk still
contains dependencies, just install it. It will defines the good
Environment variables 
&nbsp;OGRE_HOME
= C:\OgreSDK
</div>


<h4 style="margin-left: 40px;">Zlib for Ogre SDK</h4>

<p style="margin-left: 40px;">ZLib:
If you are using 1 prebuilt release of Ogre SDK, ZLib is not embedded,
download last version on <a href="http://www.zlib.net/">http://www.zlib.net</a>,<br></p><ul style="margin-left: 40px;"><li>
open project/visualc6/zlib.dsw, </li><li>upgrade, </li><li>Edit the LIB_Debug and LIB_Release
project settings and in the Resources|General section, remove the
resource name,</li><li>build LIB_Debug and LIB_Release configs, </li><li>copy zlib.h and zconf.h into
ogrenew/Dependencies/include, </li><li>copy zlib.lib and zlibd.lib from
visualc6/Win32_LIB_&lt;config&gt;</li><li>
into ogrenew/Dependencies/lib/&lt;config&gt;</li></ul><p style="margin-left: 40px;"></p><blockquote style="margin-right: 0px;" dir="ltr">
</blockquote>
<h3>RakNet</h3>
<p> Peer module and RakNetServer are using RakNet SDK to
deal with network.</p>
<ul><li>Download the RakNet package release 3.401 (or 
later)</li>
    <li>Open RakNet solution and compile DLL project in Debug and Release configurations</li>
</ul>
    <p>
        If you are using release 3.401, you have to fix 1 bug into FileListTransfer.cpp 
        (line 645), add line i = 0;</p>
    <p>
        unsigned int bytesRead;<br />
        char *dataBlocks[2];<br />
        int lengths[2];<br />
        RakNet::BitStream outBitstream;<br />
        i=0;<br />
        while (i &lt; filesToPush.Size())<br />
        {<br />
        ...<br />
    <ul>
<li>Unzip it and define your RAKNET_PATH env. var. (eg. 
    "C:\RakNet-3.401")</li><li>Build Debug and Release configuration</li><ul><li>errors
occurs when building the solution, It's only for some sample so don't
care about it. The main dll should be built correctly. </li></ul>
</ul>
<h3>VoiceEngine</h3>

<h4>Boost</h4>

<blockquote style="margin-right: 0px;" dir="ltr">
<p><br>
Download the BOOST package release 1.34.1 (<a href="http://sourceforge.net/">http://sourceforge.net</a>,
search boost c++ libraries, download 1.34.1)<br>
&nbsp;(because some bugs found into pool&lt;&gt; in 1.35),</p>
<p>unzip it and define your <span style="font-weight: bold;">BOOST_ROOT</span>
env. var. (eg. "C:\boost_1_34_1")</p>
<p> 1.37 seems to work fine.</p>
</blockquote>

<h4> Fmod</h4>

<blockquote style="margin-right: 0px;" dir="ltr">
<p> <br>
Download the FMOD EX package (<a href="http://www.fmod.org/index.php/download">http://www.fmod.org/index.php/download</a>),<br>
&nbsp;install it and define your <span style="font-weight: bold;">FMOD_PATH</span>
env. var. (eg. "C:\Program Files\FMOD SoundSystem\FMOD Programmers API
Win32\api")</p>
</blockquote>

<h3>PhysX</h3>

<p> Peer module is
using Ageia PhysX </p>
<ul><li>
&nbsp;Download
2 packages runtime &amp; SDK on <a href="http://devsupport.ageia.com/">http://devsupport.ageia.com</a>
</li><ul><li>
&nbsp;Download
runtime : PhysX_8.05.26_SystemSoftware or PhysX_8.10.29_SystemSoftware
if your graphic hardware manage physics (NVidia 8Series, 9Series and
CT200series)&nbsp; 
</li><li>
&nbsp;Download
SDK : PhysX_2.8.1_SDK_Core.msi 
</li></ul><li>
Install Both packages
</li></ul>
<ul><li>
Defines your
PHYSX_DIR env. var. (eg. C:\Program Files\NVIDIA Corporation\NVIDIA
PhysX SDK\v2.8.1)<br>
&nbsp; 
</li><li>Last
repository: <a href="http://developer.nvidia.com/object/physx_downloads.html">http://developer.nvidia.com/object/physx_downloads.html</a>
</li></ul>

<h3>Build Solipsis</h3>
 The time to build the project is finally come<br><br>
<ul><li>
Get SVN
repository for Solipsis</li><li>open the 3rd Parties
solution (depending on your visual studio version) &nbsp;:
&nbsp;Sources\3rdParties_vc8.sln or &nbsp;Sources\3rdParties_vc9.sln</li><li>Batch build all modules. </li><li>Open
solipsis_vcX.sln (depending on your visual studio version)
</li><li>
Build The solution.</li><ul><li>NCS is for Null Client server, peer and Navigator are gathered into the same exe</li></ul></ul>
 
<p>This
solution contains :</p>
 
<ul><li>
The Navigator (main client application,
contains peer in NCS configs)
</li><li>
The Peer (not used in NCS configs)
</li><li>
Rak Net Server
</li></ul>
 
<ul><li>
and all project libraries&nbsp;
</li></ul><br><h3>VNC</h3>
<p>If you're using the visual studio express, to build the VNC plugin afx is needed so define
the directories of the PSDK into the VS options,<br>
Tools/Options menu, Projects and solutions, VC++ directories, Include
files + C:\Program Files\Microsoft Platform SDK\Include + C:\Program
Files\Microsoft Platform SDK\Include\mfc,<br>
Library files + C:\Program Files\Microsoft Platform SDK\Lib</p><h3>Preprocessor Definitions</h3>

<p>COMPILATION
DEFINES (add 1 starting 'N' char to unset it):<br>
UIDEBUG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set/Unset the debug user interface panel<br>
DEMO_NAVI1&nbsp;&nbsp;&nbsp;&nbsp; Set/Unset Navi demo1
(1 panel on YouTube video, 1 panel on gpl.txt + 1 knot mesh with google
homepage)<br>
DEMO_NAVI2&nbsp;&nbsp;&nbsp;&nbsp; Set/Unset Navi demo2
(demo with 1 panel on YouTube video)<br>
DEMO_VNC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set/Unset VNC demo (demo with 1 panel on VNC viewer)<br>
DEMO_VLC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set/Unset VLC demo (demo with 1 panel on VLC player)<br>
DEMO_VOICE&nbsp;&nbsp;&nbsp;&nbsp; Set/Unset Voice chat
demo<br>
DEMO_PHYSICS1&nbsp; Set/Unset Physics demo (1 cube will drop into
the spatialStation)<br>
NSHADOWS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set/Unset shadows (hm hm just test, still lot of stuff)<br>
LOGSNDRCV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set/Unset
traces on sent/received XML msgs</p>

<p>&nbsp;<br>About
Navi/LLMozLib Debug assertion, to avoid them:<br>
Define the XPCOM_DEBUG_BREAK syst. env. var.<br>
&nbsp;XPCOM_DEBUG_BREAK = warn</p>
<p>LLMozLib was
originally compiled/linked on VC7.1 so msvcp71.dll, msvcp71d.dll,
msvcr71.dll, msvcr71d.dll<br>
are necessary when Solipsis is compiled/linked in Debug mode on VC
&gt; 7.1, unfortunately those DLLs were not<br>
packaged in a redistributable, you can find them into
DevTools\llmozlib\libraries\i686-win32\vc71redist OR<br>
run navigatorModuleOnlyNav\copyDebugVC71RedistFiles.ba</p>
<h2>Debugging</h2>

<p>Check into the
Navigator project settings you set correctly the Debug/Working
directory to  $(TargetDir)<br>
Press F5 to run the Release binary OR launch
directly navigator/bin/Release/Navigator.exe</p>
<p>In NCS configs peer is included into the navigator</p>
<p>In other configs peer should be launched before.
see the Help section for options.</p>

<h2>Building Documentation</h2>

<p>To generate HTML
documentation :</p>
<ul><li>
&nbsp;Download
Doxygen Tool (doxygen.exe)
</li><li>
&nbsp;Define
your DOXYGEN_PATH env. var. on directory containing doxygen.exe (eg.
C:\doxygen)
</li><li>
&nbsp;Run
Docs\doxygen\doxygen.bat</li></ul>
<p>To generate the dependencies graph, install
graphviz and run the associated batch file :</p><p>\Docs\doxygen\GraphViz_Dependencies.bat<br><br>On dependencie change, modify the file Docs/doxygen/ModuleDependenciesGraph.gv<br></p><h2>Building Setup</h2>

<p>To generate setup
from NSIS: (unfortunately the vdproj are not supported by Express
editions so we use NSIS, not so bad after all ;-)<br>
&nbsp;Download NSIS on nsis.sourceforge.net<br>
&nbsp;Define your NSIS_PATH env. var. on directory containing
makensis.exe (eg. C:\Program Files\NSIS)<br>
&nbsp;Run setup\nsis\makensis.bat or setup\nsis\makensisNCS.bat
(files are taken from the Release directory so check you really build
all)</p>
<p>Before creating a setup, don't forget to clean up
your release directory by deleting it completly, then launch a rebuild.</p>
<p>The resulting setup should be put in a directory
containing the following directories and files :</p>
<ul><li>
Solipsis-X.X.X-win32.exe (result of nsis
generation)
</li><li>
Solipsis_Building_Guide_v1_0.pdf
</li><li>
Solipsis_Installation_Guide_v1_0.pdf
</li><li>
VCRedistx86\ (directory of visual c++ redist)
</li><ul><li>
vs2005SP1\
</li><ul><li>
vcredist_x86.exe (install of visual c++
redist)
</li></ul></ul><li>
Python\
</li><ul><li>
python-2.5.2.msi
</li></ul><li>
PhysX\
</li><ul><li>
PhysX_7.11.13_SystemSoftware.exe
</li></ul><li>
DirectX\ (DirectX 9.0c setup directory)
</li><ul><li>contains DXSETUP.exe, Dll and all .cab
associated.</li><br><br></ul></ul><br><p style="text-align: center;">&nbsp;<a href="http://www.agence-nationale-recherche.fr/"><img src="../HTML/images/s_anr.jpg" border="0" height="32"></a><a href="http://www.images-et-reseaux.com/"><img src="../HTML/images/s_imr.jpg" border="0" height="32"></a><a href="http://rd.francetelecom.com/fr/groupe/rd/"><img src="../HTML/images/s_orange.jpg" border="0" height="32"></a> &nbsp; <a href="http://www.irisa.fr/"><img src="../HTML/images/s_inria.jpg" border="0" height="32"></a>
&nbsp; <a href="http://www.archivideo.com/"><img src="../HTML/images/s_archivideo.jpg" border="0" height="32"></a>
&nbsp; <a href="http://www.artefacto.fr/"><img src="../HTML/images/s_artefacto.jpg" border="0" height="32"></a> &nbsp; <a href="http://www.uhb.fr/sc_humaines/las/"><img src="../HTML/images/s_rennes2.jpg" border="0" height="32"></a> &nbsp;</p>
<p></p>






<p></p>
 
<p>&nbsp;</p>

</body></html>